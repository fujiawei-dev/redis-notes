---
date: 2022-09-10T17:48:06+08:00  # 创建日期
author: "Rustle Karl"  # 作者

title: "Redis 面试题(01)"  # 文章标题
url:  "posts/redis/interview/answers/q001"  # 设置网页永久链接
tags: [ "redis" ]  # 标签
categories: [ "Redis 学习笔记" ]  # 分类

toc: true  # 目录
draft: true  # 草稿
---

- [什么是 Redis？](#什么是-redis)
- [Redis 相比 memcached 有哪些优势？](#redis-相比-memcached-有哪些优势)
- [Redis 支持哪几种数据类型？](#redis-支持哪几种数据类型)
- [Redis 主要消耗什么物理资源？](#redis-主要消耗什么物理资源)
- [Redis 的全称是什么？](#redis-的全称是什么)
- [Redis 有哪几种数据淘汰策略？](#redis-有哪几种数据淘汰策略)
- [一个字符串类型的值能存储最大容量是多少？](#一个字符串类型的值能存储最大容量是多少)
- [为什么 Redis 需要把所有数据放到内存中？](#为什么-redis-需要把所有数据放到内存中)
- [Redis 集群方案应该怎么做？都有哪些方案？](#redis-集群方案应该怎么做都有哪些方案)
- [Redis 集群方案什么情况下会导致整个集群不可用？](#redis-集群方案什么情况下会导致整个集群不可用)
- [MySQL 里有 2000w 数据，redis 中只存 20w 的数据，如何保证 redis 中的数据都是热点数据？](#mysql-里有-2000w-数据redis-中只存-20w-的数据如何保证-redis-中的数据都是热点数据)
- [Redis 有哪些适合的场景？](#redis-有哪些适合的场景)
- [Redis 如何设置密码及验证密码？](#redis-如何设置密码及验证密码)
- [说说 Redis 哈希槽的概念？](#说说-redis-哈希槽的概念)
- [Redis 集群会有写操作丢失吗？为什么？](#redis-集群会有写操作丢失吗为什么)
- [Redis 集群之间是如何复制的？](#redis-集群之间是如何复制的)
- [Redis 集群最大节点个数是多少？](#redis-集群最大节点个数是多少)
- [Redis 集群如何选择数据库？](#redis-集群如何选择数据库)
- [Redis 中的管道有什么用？](#redis-中的管道有什么用)
- [怎么理解 Redis 事务？](#怎么理解-redis-事务)
- [Redis 事务相关的命令有哪几个？](#redis-事务相关的命令有哪几个)
- [Redis Key 的过期时间和永久有效分别怎么设置？](#redis-key-的过期时间和永久有效分别怎么设置)
- [Redis 如何做内存优化？](#redis-如何做内存优化)

## 什么是 Redis？

Redis 本质上是一个 Key-Value 类型的内存数据库，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据 flush 到硬盘上进行保存。

因为是纯内存操作，Redis 的性能非常出色，每秒可以处理超过 10 万次读写操作，是已**知性能最快的 Key-Value 数据库**。

Redis 的出色之处不仅仅是性能，Redis 最大的魅力是**支持保存多种数据结构**，此外单个 value 的最大限制是 512M，因此 Redis 可以用来实现很多有用的功能，比方说用 List 来做 FIFO 双向链表，实现一个轻量级的高性能消息队列服务，用 Set 可以做高性能的 tag 系统等等。另外 Redis 也可以对存入的 Key-Value 设置 expire 时间。

Redis 的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此 Redis 适合的场景主要局限在较小数据量的高性能操作和运算上。

## Redis 相比 memcached 有哪些优势？

memcached 2003.5.22 - 至今

redis 2009.5.10 - 至今

- memcached 所有的值均是简单的字符串，redis 作为其替代者，支持更为丰富的数据类型

- redis 的速度比 memcached 快很多

- redis 可以持久化其数据

## Redis 支持哪几种数据类型？

String、List、Set、Sorted Set、Hashes.

字符串、双向链表、集合、有序集合、哈希。

## Redis 主要消耗什么物理资源？

内存。

## Redis 的全称是什么？

Remote Dictionary Server。

## Redis 有哪几种数据淘汰策略？

4.0 以前是 6 种，4.0 新增 2 种。

[Redis 中内存淘汰算法实现](../../docs/internal/memory_policy.md)

## 一个字符串类型的值能存储最大容量是多少？

512M

## 为什么 Redis 需要把所有数据放到内存中？

Redis 为了达到最快的读写速度将数据都读到内存中，并通过异步的方式将数据写入磁盘。

所以 redis 具有快速和数据持久化的特征。如果不将数据放在内存中，磁盘 I/O 速度为严重影响 redis 的性能。

如果设置了最大使用的内存，则数据已有记录数达到内存限值后不能继续插入新值。

## Redis 集群方案应该怎么做？都有哪些方案？

[Redis 的三种集群模式](../../quickstart/cluster.md)

## Redis 集群方案什么情况下会导致整个集群不可用？

有 A，B，C 三个节点的集群, 在没有复制模型的情况下, 如果节点 B 失败了，那么整个集群就会以为缺少 5501 -11000 这个范围的槽而不可用。

## MySQL 里有 2000w 数据，redis 中只存 20w 的数据，如何保证 redis 中的数据都是热点数据？

redis 内存数据集大小上升到一定大小的时候，就会施行数据淘汰策略。

## Redis 有哪些适合的场景？

会话缓存（Session Cache）、全页缓存（FPC）、队列、排行榜 / 计数器、发布 / 订阅。

## Redis 如何设置密码及验证密码？

设置密码：

```bash
config set requirepass 123456
```

授权密码：

```bash
auth 123456
```

## 说说 Redis 哈希槽的概念？

Redis 集群没有使用一致性 hash, 而是引入了哈希槽的概念，Redis 集群有 16384 个哈希槽，每个 key 通过 CRC16 校验后对 16384 取模来决定放置哪个槽，集群的每个节点负责一部分 hash 槽。

## Redis 集群会有写操作丢失吗？为什么？

Redis 并不能保证数据的强一致性，这意味这在实际中集群在特定的条件下可能会丢失写操作。

## Redis 集群之间是如何复制的？

异步复制

## Redis 集群最大节点个数是多少？

16384 个。

## Redis 集群如何选择数据库？

Redis 集群目前无法做数据库选择，默认在 0 数据库。

## Redis 中的管道有什么用？

一次请求 / 响应服务器能实现处理新的请求即使旧的请求还未被响应。这样就可以将多个命令发送到服务器，而不用等待回复，最后在一个步骤中读取该答复。

## 怎么理解 Redis 事务？

事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。

事务是一个原子操作：事务中的命令要么全部被执行，要么全部都不执行。

## Redis 事务相关的命令有哪几个？

MULTI、EXEC、DISCARD、WATCH

## Redis Key 的过期时间和永久有效分别怎么设置？

EXPIRE 和 PERSIST 命令。

## Redis 如何做内存优化？

尽可能使用哈希（hashes），哈希使用的内存非常小，所以应该尽可能的将数据模型抽象到一个哈希表里面。
